var H=new function(){var e={extract:function(t,n){if(!(new RegExp("[{[]")).test(n))return e.get(t,n)||[];var r=e._tokenize(n),i=[],s=[],o={set:[t]};for(var u=0;u<r.length;u++){i=[];for(var a=0;a<o.set.length;a++){for(var f in o.set[a])if(o.set[a].hasOwnProperty(f)){if(e._matchToken(f,r[u]))i.push(o.set[a][f])}}o.set=i}return o.set},_matchToken:function(e,t){if(t==="{n}")return Number(e)%1===0;if(t==="{s}")return typeof e==="string";if(Number(t)%1===0)return e==t;return e===t},_matches:function(e,t){},expand:function(t){var n,r,i,s,o={},u,a,f;if(!t.length)t=[t];for(var l=0;l<t.length;l++){f=t[l];for(var n in f)if(f.hasOwnProperty(n)){r=e._tokenize(n).reverse();a=typeof f[n]==="function"?f[n]():f[n];if(r[0]==="{n}"||!isNaN(Number(r[0]))){s=[];s[r[0]]=a}else{s={};s[r[0]]=a}r.shift();for(var c=0;c<r.length;c++){if(r[c]==="{n}"||!isNaN(Number(r[c])))i=[],i[r[c]]=s;else i={},i[r[c]]=s;s=i}o=e.merge(false,o,s)}}return o},get:function(t,n){var r=t,i=e._tokenize(n);for(var s=0;s<i.length;s++){if(typeof r==="object"&&typeof r[i[s]]!=="undefined")r=r[i[s]];else return null}return r},merge:function(){var t=Array.prototype.slice.call(arguments),n,r=false;if(typeof arguments[0]==="boolean")r=t.shift();n=t.shift();for(var i=0;i<t.length;i++){for(var s in t[i])if(t[i].hasOwnProperty(s)){if(typeof t[i][s]==="object"&&n[s]&&!t[i][s].nodeType)n[s]=e.merge(r,n[s],t[i][s]);else n[s]=t[i][s]}}return n},insert:function(t,n,r){var i=e._tokenize(n),s,o,u={};if(n.indexOf("{")===-1&&n.indexOf("[]")===-1){return e._simpleOp("insert",t,i,r)}if(e.keys(t).length){s=i.shift();o=i.join(".");for(var a in t)if(t.hasOwnProperty(a)){if(e._matchToken(a,s)){if(!o)t[a]=r;else t[a]=e.insert(t[a],o,r)}}}else{u[n]=r;return e.expand([u])}return t},remove:function(t,n){var r=e._tokenize(n),i,s,o,u;if(n.indexOf("{")===-1){return e._simpleOp("remove",t,r)}s=r.shift();o=r.join(".");for(var a in t)if(t.hasOwnProperty(a)){i=e._matchToken(a,s);if(i&&typeof t[a]==="object"){t[a]=e.remove(t[a],o)}else if(i){if(Array.isArray(t)){t.splice(a,1)}else{delete t[a]}}}return t},_simpleOp:function(t,n,r,i){var s=n,o;for(var u=0;u<r.length;u++){if(t==="insert"){if(u===r.length-1){s[r[u]]=i;return n}if(typeof s[r[u]]!=="object"){if(!isNaN(Number(r[u+1]))){s[r[u]]=[]}else{s[r[u]]={}}}s=s[r[u]]}else if(t==="remove"){if(u===r.length-1){o=e.insert({},"item",s[r[u]]);if(Array.isArray(s)){s.splice(r[u],1)}else{delete s[r[u]]}n=o.item;return n}if(typeof s[r[u]]==="undefined"){return n}s=s[r[u]]}}},_tokenize:function(e){if(e.indexOf("data[")===-1){return e.split(".")}else{return e.replace(/^data/,"").replace(/^\[|\]$/g,"").split("][").map(function(e){return e===""?"{n}":e})}},flatten:function(t,n,r){return e._flatten(e.merge(true,{},t),n,r)},_flatten:function(t,n,r){var i="",s=[],o={},u,a,f,n=n||".",r=r||false,l=n==="][";while(e.keys(t).length||Array.isArray(t)&&t.length){if(Array.isArray(t)){u=t.length-1;a=t.pop()}else{u=e.keys(t)[0];a=t[u];delete t[u]}if(i.split(n).length===r||typeof a!=="object"||a==null||a.nodeType){if(l)o["data["+i+u+"]"]=a||"";else o[i+u]=a||""}else{if(e.keys(t).length>0){s.push([t,i])}t=a;i+=u+n}if(e.keys(t).length===0&&s.length){f=s.pop();t=f[0],i=f[1]}}return o},keys:function(e){var t=[];if(Array.isArray(e)){e.map(function(e,n){t.push(n)})}else{for(var n in e)if(e.hasOwnProperty(n))t.push(n)}return t}};return e};if(!Array.prototype.isArray){Array.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"}}